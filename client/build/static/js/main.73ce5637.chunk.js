(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{55:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),c=a.n(s),r=a(20),o=a.n(r),l=a(9),i=a(22),d=a(8),j=(a(55),a(86)),u=a(88),b=function(e){var t=e.title;return Object(n.jsxs)(j.a,{animation:"false",collapseOnSelect:!0,expand:"lg",bg:"primary",variant:"dark",fixed:"top",children:[Object(n.jsx)(j.a.Brand,{children:t}),Object(n.jsx)(j.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsx)(j.a.Collapse,{animation:"false",id:"responsive-navbar-nav",children:Object(n.jsxs)(u.a,{className:"ml-auto",children:[Object(n.jsx)(u.a.Link,{as:i.b,to:"/",children:"Home"}),Object(n.jsx)(u.a.Link,{as:i.b,to:"operations",children:"Operations"})]})})]})},m=function(e){var t=e.title;return Object(n.jsx)("header",{className:"col-12 bg-primary text-white",children:Object(n.jsx)(b,{title:t})})},x=a(6),p=a.n(x),h=a(7),O=a(87),v=a(49),f=a(84),g=a(27),w=a(26),N=a.n(w),y=a(13),C=a.n(y),k=function(e){var t,a,s,c=e.updateList,r=e.setUpdateList,o=e.setViewSpinner,l=e.setTotalBudget,i=e.totalBudget,d=Object(g.a)(),j=d.register,u=d.handleSubmit,b=d.errors,m=function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n,s,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/post/".concat(a,"/"),t.type=a,s=parseInt(i)+parseInt(t.amount),d=parseInt(i)-parseInt(t.amount),e.prev=4,e.next=7,C.a.post(n,t);case 7:o(!0),r(c+1),l("income"===a?s:d),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"container d-flex flex-column align-items-center",children:Object(n.jsx)(O.a,{onSubmit:u((function(e){var t=e.concept,a=e.amount,n=e.date,s=e.type,c=N()(n).add(1,"d").format("DD/MM/YYYY");m({id:0,concept:t,amount:a,date:c},s.toLowerCase())})),children:Object(n.jsxs)(O.a.Row,{className:"container d-flex justify-content-center",children:[Object(n.jsxs)(O.a.Group,{as:v.a,md:"10",controlId:"validationCustom01",children:[Object(n.jsx)(O.a.Label,{children:"Concept"}),Object(n.jsx)(O.a.Control,{name:"concept",type:"text",placeholder:"Concept",defaultValue:"Ex: Salary",ref:j({required:!0,pattern:{value:/^[A-Za-z\s]+$/,message:"Please, dont enter numbers"},maxLength:{value:45,message:"The max length is 45 chars."}})}),Object(n.jsx)("div",{className:"row col-12 text-white text-small text-center bg-danger mx-auto",children:Object(n.jsx)("span",{className:"mx-auto",children:null===b||void 0===b||null===(t=b.concept)||void 0===t?void 0:t.message})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,md:"10",controlId:"validationCustom02",children:[Object(n.jsx)(O.a.Label,{children:"Amount"}),Object(n.jsx)(O.a.Control,{name:"amount",type:"number",placeholder:"Amount",ref:j({required:!0,min:{value:0,message:"Please, enter a no-negative number."},maxLength:{value:11,message:"Please, enter a number with 11 digits."},valueAsNumber:{value:!0,message:"Please, enter a number"}})}),Object(n.jsx)("div",{className:"row col-12 text-white text-small text-center bg-danger mx-auto",children:Object(n.jsx)("span",{className:"mx-auto",children:null===b||void 0===b||null===(a=b.amount)||void 0===a?void 0:a.message})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,md:"10",controlId:"validationCustomDate",children:[Object(n.jsx)(O.a.Label,{children:"Date"}),Object(n.jsx)(O.a.Control,{name:"date",type:"date",ref:j({required:!0,valueAsDate:{value:!0,message:"Please, enter a validated date."}})}),Object(n.jsx)("div",{className:"row col-12 text-white text-small text-center bg-danger mx-auto",children:Object(n.jsx)("span",{className:"mx-auto",children:null===b||void 0===b||null===(s=b.date)||void 0===s?void 0:s.message})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,md:"10",controlId:"validationCustom03",children:[Object(n.jsx)(O.a.Label,{children:"Type"}),Object(n.jsxs)(O.a.Control,{as:"select",name:"type",ref:j({required:!0}),children:[Object(n.jsx)("option",{disabled:!0,children:"Choose a type of operation"}),Object(n.jsx)("option",{id:"income",children:"Income"}),Object(n.jsx)("option",{id:"expenses",children:"Expenses"})]})]}),Object(n.jsx)(f.a,{className:"col-8",type:"submit",children:"Add new movement"})]})})})},S=function(e){var t=e.dataOperation,a=e.updateList,s=e.setUpdateList;return t.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.concept}),Object(n.jsxs)("td",{children:["$ ",e.amount]}),Object(n.jsx)("td",{children:e.date}),Object(n.jsxs)("td",{className:"text-center",children:[Object(n.jsx)("button",{className:"btn-sm btn-info",onClick:function(){var t=e.id,a=e.type,n=e.concept,s=e.amount,c=e.date.split("/").reverse().join("-");window.location.href="http://localhost:3000/edit?id=".concat(t,"&type=").concat(a,"&concept=").concat(n,"&amount=").concat(s,"&date=").concat(c)},children:"\u2710 Edit"}),Object(n.jsx)("button",{className:"btn-sm btn-danger ml-1",onClick:Object(h.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/delete/".concat(e.type,"/").concat(e.id,"/"),t.next=3,C.a.delete(n);case 3:s(a+1);case 4:case"end":return t.stop()}}),t)}))),children:"\u2297 Delete"})]})]},e.id)}))},L=function(){return Object(n.jsxs)("div",{className:"sk-chase mx-auto",children:[Object(n.jsx)("div",{className:"sk-chase-dot"}),Object(n.jsx)("div",{className:"sk-chase-dot"}),Object(n.jsx)("div",{className:"sk-chase-dot"}),Object(n.jsx)("div",{className:"sk-chase-dot"}),Object(n.jsx)("div",{className:"sk-chase-dot"}),Object(n.jsx)("div",{className:"sk-chase-dot"})]})},E=function(e){var t=e.msgError;e.typeMsg;return Object(n.jsx)("div",{className:"row py-1 mx-auto alert alert-danger",children:t})},I=a(85);function T(e,t){return B.apply(this,arguments)}function B(){return(B=Object(h.a)(p.a.mark((function e(t,a){var n,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/get/".concat(t,"/").concat(a,"/"),e.prev=1,e.next=4,C.a.get(n);case 4:return s=e.sent,c=s.data,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var V=function(e){var t=e.setTitle,a=e.setTotalBudget,c=e.totalBudget,r=e.viewSpinner,o=e.setViewSpinner,i=e.viewError,d=e.setViewError,j=Object(s.useState)("income"),u=Object(l.a)(j,2),b=u[0],m=u[1],x=Object(s.useState)(0),O=Object(l.a)(x,2),v=O[0],f=O[1],g=Object(s.useState)(10),w=Object(l.a)(g,2),N=w[0],y=w[1],C=Object(s.useState)([]),B=Object(l.a)(C,2),V=B[0],D=B[1];return Object(s.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(b,N);case 3:t=e.sent,d(!1),D(t),o(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),o(!1),d(!0);case 13:case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}t("Operations"),o(!0),function(){e.apply(this,arguments)}()}),[N,t,d,o,v,b]),Object(n.jsxs)("div",{className:"container bg-light pt-3",children:[Object(n.jsxs)("div",{className:"row d-flex flex-column align-items-center",children:[Object(n.jsx)("h3",{children:"Add a new movement"}),Object(n.jsx)(k,{setUpdateList:f,updateList:v,setViewSpinner:o,setTotalBudget:a,totalBudget:c})]}),Object(n.jsxs)("div",{className:"col-11 border rounded mx-auto mt-3 pt-2",children:[Object(n.jsx)("h3",{children:"List to registered operations"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("ul",{className:"row d-flex flex-row list-group",children:[Object(n.jsx)("button",{autoFocus:!0,type:"button",className:"col-6 list-group-item list-group-item-success btn btn-success cursor",onClick:function(){m("income"),o(!0),f(v+1)},children:"Income"}),Object(n.jsx)("button",{className:"col-6 list-group-item list-group-item-danger btn btn-danger cursor",onClick:function(){m("expenses"),o(!0),f(v+1)},children:"Expenses"})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("span",{className:"col-12 bg-dark text-white py-2",children:"Choose the number of operations you want to see"})}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("input",{type:"number",defaultValue:"10",min:"1",className:"col-6",onChange:function(e){y(e.target.value)}}),Object(n.jsx)("button",{className:"col-6 btn btn-primary",onClick:function(){Number(N)<0||f(v+1)},children:"Get data"})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)(I.a,{className:"col-12",striped:!0,bordered:!0,hover:!0,variant:"light",size:"sm",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Concept"}),Object(n.jsx)("th",{children:"Amount"}),Object(n.jsx)("th",{children:"Date"}),Object(n.jsx)("th",{className:"text-center",children:"Options"})]})}),Object(n.jsx)("tbody",{children:r?null:Object(n.jsx)(S,{dataOperation:V,updateList:v,setUpdateList:f})})]})}),Object(n.jsxs)("div",{className:"row pb-3",children:[r?Object(n.jsx)(L,{}):null,i?Object(n.jsx)(E,{msgError:"Could not connect to the database."}):null]})]})]})]})},D=function(e){var t,a,c,r=e.setTitle,o=Object(g.a)(),l=o.register,i=o.handleSubmit,d=o.errors,j=new URLSearchParams(window.location.search),u=j.get("id"),b=j.get("type"),m=j.get("amount"),x=j.get("concept"),w=j.get("date");Object(s.useLayoutEffect)((function(){r("Edit Operation")}));var y=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/put/".concat(b,"/").concat(u,"/"),e.prev=1,e.next=4,C.a.put(a,t);case 4:window.location.href="http://localhost:3000/operations",e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"container bg-light pt-3",children:Object(n.jsx)("div",{className:"container d-flex flex-column align-items-center",children:Object(n.jsx)(O.a,{onSubmit:i((function(e){var t=e.concept,a=e.amount,n=e.date,s=N()(n).add(1,"d").format("DD/MM/YYYY");y({concept:t,amount:a,date:s,type:b})})),children:Object(n.jsxs)(O.a.Row,{className:"container d-flex justify-content-center",children:[Object(n.jsxs)(O.a.Group,{as:v.a,md:"10",controlId:"validationCustom01",children:[Object(n.jsx)(O.a.Label,{children:"Concept"}),Object(n.jsx)(O.a.Control,{name:"concept",type:"text",placeholder:"Concept",defaultValue:x,ref:l({required:!0,maxLength:{value:45,message:"The max length is 45 chars."}})}),Object(n.jsx)("div",{className:"row col-12 text-white text-small text-center bg-danger mx-auto",children:Object(n.jsx)("span",{className:"mx-auto",children:null===d||void 0===d||null===(t=d.concept)||void 0===t?void 0:t.message})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,md:"10",controlId:"validationCustom02",children:[Object(n.jsx)(O.a.Label,{children:"Amount"}),Object(n.jsx)(O.a.Control,{name:"amount",type:"number",defaultValue:m,ref:l({required:!0,maxLength:{value:11,message:"Please, enter a number with 11 digits."},valueAsNumber:{value:!0,message:"Please, enter a number"}})}),Object(n.jsx)("div",{className:"row col-12 text-white text-small text-center bg-danger mx-auto",children:Object(n.jsx)("span",{className:"mx-auto",children:null===d||void 0===d||null===(a=d.amount)||void 0===a?void 0:a.message})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,md:"10",controlId:"validationCustomDate",children:[Object(n.jsx)(O.a.Label,{children:"Date"}),Object(n.jsx)(O.a.Control,{name:"date",type:"date",defaultValue:w,ref:l({required:!0,valueAsDate:{value:!0,message:"Please, enter a validated date."}})}),Object(n.jsx)("div",{className:"row col-12 text-white text-small text-center bg-danger mx-auto",children:Object(n.jsx)("span",{className:"mx-auto",children:null===d||void 0===d||null===(c=d.date)||void 0===c?void 0:c.message})})]}),Object(n.jsxs)(O.a.Group,{as:v.a,md:"10",controlId:"validationCustom03",children:[Object(n.jsx)(O.a.Label,{children:"Type"}),Object(n.jsxs)(O.a.Control,{as:"select",name:"type",defaultValue:b,ref:l({required:!0}),children:[Object(n.jsx)("option",{value:"",disabled:!0,children:"Choose a type of operation"}),Object(n.jsx)("option",{value:"income",disabled:!0,children:"Income"}),Object(n.jsx)("option",{value:"expenses",disabled:!0,children:"Expenses"})]})]}),Object(n.jsx)(f.a,{className:"col-8",type:"submit",children:"Edit the operation"})]})})})})};function A(){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(p.a.mark((function e(){var t,a,n,s,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/get/lastmovements/totalincome",t="/api/get/lastmovements/totalexpenses",e.prev=2,e.next=5,C.a.get("/api/get/lastmovements/totalincome");case 5:return a=e.sent,n=a.data[0].totalIncome,e.next=9,C.a.get(t);case 9:return s=e.sent,c=s.data[0].totalExpenses,e.next=13,G();case 13:return r=e.sent,e.abrupt("return",{totalIncome:n,totalExpenses:c,movements:r});case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}function G(){return q.apply(this,arguments)}function q(){return(q=Object(h.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/get/lastmovements",e.prev=1,e.next=4,C.a.get("/api/get/lastmovements");case 4:return t=e.sent,a=t.data,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var Y=function(e){var t=e.setTitle,a=e.totalBudget,c=e.setTotalBudget,r=e.viewSpinner,o=e.setViewSpinner,i=e.viewError,d=e.setViewError,j=Object(s.useState)([]),u=Object(l.a)(j,2),b=u[0],m=u[1];return Object(s.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){var t,a,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:t=e.sent,a=t.totalIncome,n=t.totalExpenses,s=t.movements,c(a-n),m(s),o(!1),d(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),o(!1),d(!0);case 18:case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}t("Home"),o(!0),function(){e.apply(this,arguments)}()}),[t,c,d,o]),Object(n.jsx)("div",{className:"container col-10 py-3 mt-2",children:Object(n.jsxs)("section",{className:"col-12 text-left bg-light border",children:[Object(n.jsx)("div",{className:"row d-flex justify-content-center",children:Object(n.jsx)("h2",{children:"Budgets"})}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("hgroup",{className:"col-11 border rounded bg-white d-flex flex-column flex-md-row align-items-md-baseline mx-auto",children:[Object(n.jsx)("h4",{className:a>0?"text-success mt-2":0===a?"text-info mt-2":"text-danger mt-2",children:"Total budget:"}),Object(n.jsxs)("h3",{className:"font-weight-bold ml-1 font-size-2 ml-md-3",children:["$ ",a]})]}),Object(n.jsxs)("div",{className:"col-11 border rounded mx-auto mt-3 pt-2",children:[Object(n.jsx)("h3",{children:"Last Movements"}),Object(n.jsx)("div",{children:Object(n.jsxs)(I.a,{striped:!0,bordered:!0,hover:!0,variant:"light",size:"sm",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Concept"}),Object(n.jsx)("th",{children:"Amount"}),Object(n.jsx)("th",{children:"Date"})]})}),Object(n.jsx)("tbody",{children:b.map((function(e,t){return Object(n.jsxs)("tr",{className:"income"===e.type?"table-success":"table-danger",children:[Object(n.jsx)("td",{children:e.concept}),Object(n.jsxs)("td",{children:["$ ",e.amount]}),Object(n.jsx)("td",{children:e.date})]},t)}))})]})}),Object(n.jsxs)("div",{className:"row pb-3",children:[r?Object(n.jsx)(L,{}):null,i?Object(n.jsx)(E,{msgError:"Could not connect to the database."}):null]})]})]})]})})},M=function(){return Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("footer",{className:"col-12 d-flex align-items-center justify-content-center bg-dark text-white py-3",children:Object(n.jsxs)("p",{className:"m-0",children:["\xa9 Challenge from Alkemy: Created by ",Object(n.jsx)("span",{className:"text-primary",children:"Strokol Cristhian Daniel"})]})})})};var U=function(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(!1),o=Object(l.a)(r,2),j=o[0],u=o[1],b=Object(s.useState)(!1),x=Object(l.a)(b,2),p=x[0],h=x[1],O=Object(s.useState)(0),v=Object(l.a)(O,2),f=v[0],g=v[1];return Object(s.useEffect)((function(){document.title="Personal Budget | ".concat(a)})),Object(n.jsx)(i.a,{children:Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsxs)("div",{className:"row p-5",children:[Object(n.jsx)(m,{title:a}),Object(n.jsxs)(d.c,{children:[Object(n.jsx)(d.a,{path:"/operations",children:Object(n.jsx)(V,{setTitle:c,setTotalBudget:g,totalBudget:f,viewSpinner:j,setViewSpinner:u,viewError:p,setViewError:h})}),Object(n.jsx)(d.a,{path:"/edit",children:Object(n.jsx)(D,{setTitle:c})}),Object(n.jsx)(d.a,{path:"/",children:Object(n.jsx)(Y,{setTitle:c,totalBudget:f,setTotalBudget:g,viewSpinner:j,setViewSpinner:u,viewError:p,setViewError:h})})]})]}),Object(n.jsx)(M,{})]})})};a(81);o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.73ce5637.chunk.js.map